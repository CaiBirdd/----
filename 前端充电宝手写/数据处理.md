## æ•°æ®å¤„ç†

### è€ƒå¯Ÿå¾ˆå¤š (ğŸ”´ Legend 1)

1. **å®ç°æ•°ç»„çš„ä¹±åºè¾“å‡º**

```javascript
function shuffle(arr) {
  let length = arr.length
  let temp
  while(length) {
    const randomIndex = Math.floor(Math.random() * length--)
    temp = arr[length]
    arr[length] = arr[randomIndex]
    arr[randomIndex] = temp
  }
  return arr
}
```

2. **å®ç°æ•°ç»„çš„æ‰å¹³åŒ– (Flatten)**

```javascript
const flatten = (arr) => {
  return arr.reduce((pre, cur) => {
    return pre.concat(Array.isArray(cur) ? flatten(cur) : cur)
  }, []) // reduceçš„åˆå§‹å€¼æ˜¯ä¸ªæ•°ç»„
}
```

3. **å®ç°æ•°ç»„å»é‡**

```javascript
const unique = (arr) => {
  return [...new Set(arr)]
}
```

4. **å°†æ•°å­—æ¯åƒåˆ†ä½ç”¨é€—å·éš”å¼€**

```javascript
function formatWithLoop(num) {
  let [integer, decimal] = String(num).split('.')
  // æ‹¼å¥½çš„å­—ç¬¦ä¸²ä¸€ç‚¹ç‚¹å­˜åœ¨è¿™
  let result = ''
  // ç”¨æ¥è®°å½•æ•°äº†å‡ ä¸ªæ•°
  let count = 0
  for(let i = integer.length - 1; i >= 0; i--){
    count++ // æ¯å¤„ç†ä¸€ä¸ªå­—ç¬¦+1
    result = integer[i] + result
    // åˆ¤æ–­åŠ é€—å·çš„æ—¶æœº
    if(count % 3 === 0 && i !== 0) {
      // é€»è¾‘åŒå‰ï¼Œæ–°çš„ç»“æœ = ',' + æ—§çš„ç»“æœ
      result = ',' + result
    }
  }
  // å¦‚æœæœ‰å°æ•°ï¼Œæ‹¼å›å°æ•°éƒ¨åˆ†ï¼Œè¿”å›å®Œæ•´çš„ æ²¡æœ‰å°±è¿”å›å¤„ç†å¥½çš„æ•´æ•°éƒ¨åˆ†
  return decimal ? `${result}.${decimal}` : result
}
```

5. **å®ç°éè´Ÿå¤§æ•´æ•°ç›¸åŠ å’Œç›¸ä¹˜**

```javascript
// aå’Œbéƒ½æ˜¯å­—ç¬¦ä¸²
function add(a, b) {
  // iå’ŒjæŒ‡å‘aå’Œbçš„æœ€åä¸€ä½ ä¹Ÿå°±æ˜¯ä¸ªä½ carryæ˜¯è¿›ä½
  let i = a.length - 1, j = b.length - 1, carry = 0
  let res = ''
  // æœ‰ä¸€ä¸ªæ»¡è¶³æ¡ä»¶å¾ªç¯å°±ç»§ç»­
  while(i >= 0 || j >= 0 || carry){
    // æ³¨æ„è¿™é‡Œè¦ç”¨ +è½¬æ•°å­—ï¼Œå¹¶å¤„ç†undefinedæƒ…å†µ
    const sum = carry + (+a[i--] || 0) + (+b[j--] || 0)
    res = (sum % 10) + res
    carry = Math.floor(sum / 10)
  } 
  return res || '0'
}

function multiply(num1, num2) {
  if(num1 === '0' || num2 === '0') return '0'
  const len1 = num1.length, len2 = num2.length
  const res = new Array(len1 + len2).fill(0)
  
  // ä»ä¸ªä½å¼€å§‹ä¹˜
  for(let j = len2 - 1; j >= 0; j--){
    for(let i = len1 - 1; i >= 0; i--){
      const sum = res[i + j + 1] + num1[i] * num2[j]
      // å¤„ç†ä½ä½
      res[i + j + 1] = sum % 10
      // å¤„ç†è¿›ä½
      res[i + j] += Math.floor(sum / 10)
    }
  }
  // whileå¾ªç¯å»é™¤è¡Œå‰é¢çš„0
  while(res[0] === 0) res.shift()
  return res.length ? res.join('') : '0'
}
```

6. **å®ç° add(1)(2)(3)**

```javascript
function add(num) {
  // è¿™é‡Œç”¨åˆ°äº†é—­åŒ…
  let sum = num
  const fn = (nextNum) => {
    sum += nextNum
    return fn
  }
  // åˆ©ç”¨ toString æˆ– valueOf éšå¼è½¬æ¢è¿”å›ç»“æœ
  fn.toString = () => sum
  fn.valueOf = () => sum
  return fn
}
```

7. **ES6 æ±‚å‡½æ•°å‚æ•°çš„å’Œ**

```javascript
function sum(...nums) {
  return nums.reduce((pre, cur) => pre + cur, 0)
}
```

8. **è§£æ URL Params ä¸ºå¯¹è±¡**

```javascript
function parseParam(url) {
  // splitæ–¹æ³•æŠŠå­—ç¬¦ä¸²è½¬ä¸ºæ•°ç»„ joinæŠŠæ•°ç»„æ‹¼æˆå­—ç¬¦ä¸²
  const queryStr = url.split('?')[1]
  if(!queryStr) return {}
  const paramsObj = {}
  queryStr.split('&').forEach(param => {
    if(!param.includes('=')){
      paramsObj[param] = true
      return
    }
    // åˆ†å‰²keyå’Œvalue
    let [key, val] = param.split('=')
    // è§£ç ä¸­æ–‡+è½¬æ•°å­—
    val = decodeURIComponent(val)
    val = /^\d+$/.test(val) ? parseFloat(val) : val
    // å¤„ç†keyé‡å¤é—®é¢˜
    if(paramsObj.hasOwnProperty(key)) {
      paramsObj[key] = [].concat(paramsObj[key], val)
    } else {
      paramsObj[key] = val
    }
  })
  return paramsObj
}
```

### è€ƒå¯Ÿè¾ƒå¤š (ğŸŸ  Legend 2)

9. **å®ç°æ—¥æœŸæ ¼å¼åŒ–å‡½æ•°**

```javascript
const dateFormat = (dateInput, format) => {
  const date = new Date(dateInput)
  const config = {
    'yyyy': date.getFullYear(),
    'MM': String(date.getMonth() + 1).padStart(2, '0'),
    'dd': String(date.getDate()).padStart(2, '0'),
    'HH': String(date.getHours()).padStart(2, '0'),
    'mm': String(date.getMinutes()).padStart(2, '0'),
    'ss': String(date.getSeconds()).padStart(2, '0')
  }
  for(const key in config) {
    format = format.replace(key, config[key])
  }
  return format
}
```

10. **å®ç°æ•°ç»„å…ƒç´ æ±‚å’Œ**

```javascript
const sum = (arr) => {
  return arr.reduce((pre, cur) => {
    return pre + (Array.isArray(cur) ? sum(cur) : cur)
  }, 0)
}
```

11. **ä½¿ç”¨ reduce æ±‚å’Œ**

```javascript
// 3. å¯¹è±¡æ•°ç»„æ±‚å±æ€§å’Œ
// arr = [{a:9, b:3, c:4}, {a:1, b:3}, {a:3}]ï¼Œæ±‚aå±æ€§çš„å’Œ
let arr = [{a:9, b:3, c:4}, {a:1, b:3}, {a:3}] 
const sum = arr.reduce((pre, cur) => {
    return pre + (cur.a || 0)
}, 0)
```

12. **å°† js å¯¹è±¡è½¬åŒ–ä¸ºæ ‘å½¢ç»“æ„**

```javascript
function jsonToTree(data) {
  const result = []
  const map = {}
  // å…ˆæŠŠæ‰€æœ‰é¡¹å­˜è¿› map
  data.forEach(item => map[item.id] = item)
  
  // å†æ¬¡éå†æ„é€ æ ‘
  data.forEach(item => {
    const parent = map[item.pid]
    if(parent) {
      // è¿™ä¸€æ­¥å› ä¸ºæ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥ result é‡Œçš„å†…å®¹ä¹Ÿä¼šè·Ÿç€å˜
      (parent.children || (parent.children = [])).push(item)
    } else {
      result.push(item)
    }
  })
  return result
}
```
