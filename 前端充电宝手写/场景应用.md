## åœºæ™¯åº”ç”¨

### è€ƒå¯Ÿå¾ˆå¤š (ğŸ”´ Legend 1)

1. **å¾ªç¯æ‰“å°çº¢é»„ç»¿**

```javascript
/* é€šç”¨å»¶æ—¶å‡½æ•° */
const sleep = (duration) => new Promise(resolve => setTimeout(resolve, duration))

const red = () => console.log('Red')
const green = () => console.log('Green')
const yellow = () => console.log('Yellow')

const run = async () => {
  while (true) {
    red()
    await sleep(3000)
    green()
    await sleep(1000)
    yellow()
    await sleep(2000)
  }
}
run()
```

### è€ƒå¯Ÿè¾ƒå¤š (ğŸŸ  Legend 2)

2. **å°å­©æŠ¥æ•°é—®é¢˜**

```javascript
function childNum(num, count) {
  let queue = []
  // 1-num ç¼–å·å…¥é˜Ÿ
  for (let i = 1; i <= num; i++) {
    queue.push(i)
  }
  let counter = 1
  while (queue.length > 1) {
    // shift() ç§»é™¤æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›å®ƒ
    const person = queue.shift()
    if (counter === count) {
      counter = 1 // æŠ¥æ•°åˆ°3ï¼Œæ·˜æ±°ï¼Œé‡ç½®æŠ¥æ•°
    } else {
      queue.push(person) // æ²¡åˆ°3ï¼Œå›åˆ°é˜Ÿå°¾
      counter++
    }
  }
  return queue[0]
}
```

3. **æŸ¥æ‰¾æ–‡ç« ä¸­å‡ºç°é¢‘ç‡æœ€é«˜çš„å•è¯**

```javascript
function findMostWord(article) {
  if (!article) return
  article = article.trim().toLowerCase()
  // æ³¨æ„ï¼šmatch å¦‚æœæ²¡æ‰¾åˆ°ä¼šè¿”å› nullï¼Œæ‰€ä»¥è¦ || []
  const wordList = article.match(/[a-z]+/g) || []
  const visited = {}
  let maxNum = 0
  let maxWord = ''
  
  wordList.forEach(word => {
    if (!visited[word]) {
      visited[word] = 1
    } else {
      visited[word]++
    }
    // è¾¹ç»Ÿè®¡è¾¹æ‰“æ“‚å°
    if (visited[word] > maxNum) {
      maxNum = visited[word]
      maxWord = word
    }
  })
  return maxWord + ' ' + maxNum
}
```

4. **å®ç°åŒå‘æ•°æ®ç»‘å®š (Proxy)**

```javascript
const input = document.getElementById('input')
const span = document.getElementById('span')
const obj = {}

const proxyObj = new Proxy(obj, {
  get(target, key) {
    return target[key]
  },
  set(target, key, value) {
    target[key] = value
    if (key === 'text') {
      input.value = value
      span.innerHTML = value
    }
    return true
  }
})

input.addEventListener('keyup', function(e) {
  proxyObj.text = e.target.value
})
```

5. **å®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—**

```javascript
/* è¿­ä»£æ³• (æ¨è, O(n)) */
function fibonacci(n) {
  if (n < 2) return n
  let pre1 = 0
  let pre2 = 1
  let current = 1
  
  for (let i = 2; i <= n; i++) {
    current = pre1 + pre2
    pre1 = pre2
    pre2 = current
  }
  
  return current
}
```

6. **ä½¿ç”¨ setTimeout å®ç° setInterval**

```javascript
function mySetInterval(fn, t) {
  let timerId = null
  function interval() {
    fn()
    // é€’å½’è°ƒç”¨ï¼Œç¡®ä¿ä¸Šä¸€æ¬¡æ‰§è¡Œå®Œæ‰å¼€å§‹ä¸‹ä¸€æ¬¡è®¡æ—¶
    timerId = setTimeout(interval, t)
  }
  timerId = setTimeout(interval, t)
  
  // è¿”å›å–æ¶ˆå‡½æ•°
  return {
    cancel: () => clearTimeout(timerId)
  }
}
```

7. **å®ç° jsonp**

```javascript
const jsonp = (url, callbackName = 'callback') => {
  return new Promise((resolve, reject) => {
    const funcName = `jsonp_${Date.now()}`
    const script = document.createElement('script')
    
    // æ ¸å¿ƒï¼šæŠŠå›è°ƒåå‘Šè¯‰åç«¯
    script.src = `${url}?${callbackName}=${funcName}`
    
    // æ ¸å¿ƒï¼šåœ¨ window ä¸Šç­‰ç»“æœ
    window[funcName] = (res) => {
      resolve(res)
      document.body.removeChild(script)
      delete window[funcName]
    }
    
    script.onerror = reject
    document.body.appendChild(script)
  })
}
```

8. **åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜åœ¨å¾ªç¯å¼•ç”¨**

```javascript
const isCycleObject = (obj, parent = []) => {
  if (typeof obj !== 'object' || obj === null) return false
  
  // æŸ¥æ—è°±ï¼šå¦‚æœåœ¨çˆ¶çº§é“¾è·¯é‡Œå‡ºç°è¿‡ï¼Œè¯´æ˜æœ‰ç¯
  if (parent.includes(obj)) return true
  
  const newParent = [...parent, obj]
  
  for (const key in obj) {
    if (isCycleObject(obj[key], newParent)) return true
  }
  return false
}
```

### å…¶ä»–è¡¥å……

9. **æ‰‹å†™ Object.create**

```javascript
/* æ¨¡æ‹Ÿ Object.create (æç®€ç‰ˆ) */
function create(proto) {
  // 1. åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„æ„é€ å‡½æ•°
  function F() {}
  
  // 2. å°†æ„é€ å‡½æ•°çš„åŸå‹æŒ‡å‘ proto
  F.prototype = proto
  
  // 3. è¿”å› F çš„å®ä¾‹ (å®ƒçš„ __proto__ å°±æ˜¯ proto)
  return new F()
}
```

10. **æ¯éš” 1 ç§’æ‰“å° 1,2,3,4**

```javascript
/* æ–¹æ¡ˆ 1ï¼šlet (ES6) */
for (let i = 1; i <= 4; i++) {
  setTimeout(() => {
    console.log(i)
  }, i * 1000)
}
```

11. **å‘å¸ƒ-è®¢é˜…æ¨¡å¼ (EventEmitter)**

```javascript
class EventEmitter {
  constructor() {
    this.events = {}
  }
  
  // è®¢é˜… (on)
  on(eventName, callback) {
    if (!this.events[eventName]) {
      this.events[eventName] = []
    }
    this.events[eventName].push(callback)
  }
  
  // å‘å¸ƒ (emit)
  emit(eventName, ...args) {
    const callbacks = this.events[eventName]
    if (callbacks) {
      callbacks.forEach(cb => cb(...args))
    }
  }
  
  // å–æ¶ˆè®¢é˜… (off)
  off(eventName, callback) {
    const callbacks = this.events[eventName]
    if (callbacks) {
      this.events[eventName] = callbacks.filter(cb => cb !== callback)
    }
  }
  
  // åªæ‰§è¡Œä¸€æ¬¡ (once)
  once(eventName, callback) {
    const one = (...args) => {
      callback(...args)
      this.off(eventName, one)
    }
    this.on(eventName, one)
  }
}
```